define(function(){
    var evolution = function(spec){

        var self = {};

        for(var p in spec){
          if(spec.hasOwnProperty(p))
            self[p] = spec[p];
        }

        self.evolve = function(data){
          var self = this;
          
          return data.filter(function(d){
            return d.none == 1 || d.promotion == 1;
          }).map(function(d){
            d.age += 1;
            d.tenure += 1;
            d.time_in_job += 1;
            d.age_x_tenure = d.age * d.tenure;
            
            return d.promotion == 1 ? self.promote(d) : d;
          });
        };


        self.promote = function(d){
        if(d.grade == 99)
            return 99;

          var grade_progression = [1,2,3,4,5,6],
            new_g = grade_progression.indexOf(d.grade) + 1;

          if(new_g < grade_progression.length)
            d.grade = grade_progression[new_g];

          return d;
        };


        self.hire = function(e){
            e.age = this.simulate_age(e.grade);
            e.sex = this.simulate_sex(e.grade)
            e.salary = this.simulate_salary(e.grade)
            e.aptyrs = 0;
            return e;
        };

        self.simulate_age = function(grade){
            var params = {
                0: { mean: 30.703125, std_dev: 7.495257687 },
                5: { mean: 41.75, std_dev: 9.955583176 },
                7: { mean: 40.62025317, std_dev:9.621239505 },
                9: { mean: 39.13836478, std_dev:9.20613306 },
                10: { mean: 38.05357143, std_dev: 9.628404272 },
                11: { mean: 40.91582003, std_dev:9.737030548 },
                12: { mean: 41.66666667, std_dev:9.33995257 },
                13: { mean: 44.2605042, std_dev:7.271330031 },
                14: { mean: 44.33333333, std_dev:10.26969652 },
                15: { mean: 47, std_dev: 0.1 }
            };
            return jStat.normal.sample(params[grade].mean, params[grade].std_dev);
        };


        self.event_models = {
          promotion: function(p){ return 4.65379943416689  + 0.0641927903263647 * p.tenure +((p.grade === 1 ? -4.45447244505384 : 0) + (p.grade === 2 ? -2.7588035028786 : 0) + (p.grade === 3 ? -2.32656425119767 : 0) + (p.grade === 4 ? 1.45320124062186 : 0) + (p.grade === 5 ? -0.634198836630073 : 0) + (p.grade === 6 ? 3.31704526425292 : 0) + (p.grade === 99 ? 5.40379253088541 : 0)) + ((p.step === "01" ? -1.85929128173502 : 0) + (p.step === "02" ? 2.55625073971165 : 0) + (p.step === "03" ? -1.03348099540089 : 0) + (p.step === "04" ? -0.807719875500595 : 0) + (p.step === "05" ? 2.93590287906007 : 0) + (p.step === "06" ? -0.855105058702295 : 0) + (p.step === "07" ? -0.875630337643648 : 0) + (p.step === "08" ? -1.17382108847014 : 0) + (p.step === "09" ? -1.46212484125348 : 0) + (p.step === "10" ? -1.2521223688268 : 0) + (p.step === "11" ? 2.31539282716638 : 0) + (p.step === "12" ? 2.29378302866259 : 0) + (p.step === "13" ? 2.45480978463536 : 0) + (p.step === "14" ? -1.83697071956345 : 0) + (p.step === "X" ? -1.39987269213974 : 0)) + ((p.performance === "High" ? -2.26191490778 : 0) + (p.performance === "Low" ? 6.80207592467107 : 0) + (p.performance === "Moderate" ? -1.82013121544271 : 0) + (p.performance === "Other" ? -2.72002980144836 : 0)) + ((p.occ4 === 610 ? 2.18101982399393 : 0) + (p.occ4 === 620 ? -2.59570114343458 : 0) + (p.occ4 === 621 ? 0.414681319440654 : 0)) + (p.tenure - 10.6205783763004) * ((p.grade === 1 ? -0.0487415541502948 : 0) + (p.grade === 2 ? -0.0265126349504285 : 0) + (p.grade === 3 ? -0.0335296632247664 : 0) + (p.grade === 4 ? -0.0623572855508849 : 0) + (p.grade === 5 ? 0.0196781975201165 : 0) + (p.grade === 6 ? -0.000683675714148393 : 0) + (p.grade === 99 ? 0.152146616070407 : 0)) + (p.tenure - 10.6205783763004) * ((p.step === "01" ? -0.0106925351257526 : 0) + (p.step === "02" ? -0.00751684847502634 : 0) + (p.step === "03" ? -0.021857459752018 : 0) + (p.step === "04" ? -0.0150788797293965 : 0) + (p.step === "05" ? -0.00751594948337065 : 0) + (p.step === "06" ? 0.0212121048341861 : 0) + (p.step === "07" ? 0.019482533880399 : 0) + (p.step === "08" ? 0.0153085029170543 : 0) + (p.step === "09" ? 0.00778678589126945 : 0) + (p.step === "10" ? -0.0000261422908933929 : 0) + (p.step === "11" ? 0.00406096979475427 : 0) + (p.step === "12" ? 0.0120430877548315 : 0) + (p.step === "13" ? -0.0185000529237215 : 0) + (p.step === "14" ? -0.0175485027457664 : 0) + (p.step === "X" ? 0.0188423854534509 : 0)) + (p.tenure - 10.6205783763004) * ((p.performance === "High" ? 0.0109531169891112 : 0) + (p.performance === "Low" ? -0.0198087076176123 : 0) + (p.performance === "Moderate" ? 0.034655012795282 : 0) + (p.performance === "Other" ? -0.025799422166781 : 0)) + ((p.grade === 1 ? ((p.performance === "High" ? 0.203263801598603 : 0) + (p.performance === "Low" ? -1.84550943291823 : 0) + (p.performance === "Moderate" ? 0.575351455331656 : 0) + (p.performance === "Other" ? 1.06689417598797 : 0)) : 0) + (p.grade === 2 ? ((p.performance === "High" ? 0.42845126505877 : 0) + (p.performance === "Low" ? -2.11657805377349 : 0) + (p.performance === "Moderate" ? 0.869102317605548 : 0) + (p.performance === "Other" ? 0.819024471109176 : 0)) : 0) + (p.grade === 3 ? ((p.performance === "High" ? 1.14790425162479 : 0) + (p.performance === "Low" ? -3.14190921743993 : 0) + (p.performance === "Moderate" ? 1.01644808802873 : 0) + (p.performance === "Other" ? 0.977556877786418 : 0)) : 0) + (p.grade === 4 ? ((p.performance === "High" ? -2.99356625685988 : 0) + (p.performance === "Low" ? 8.93527741470064 : 0) + (p.performance === "Moderate" ? -3.01870073679726 : 0) + (p.performance === "Other" ? -2.9230104210435 : 0)) : 0) + (p.grade === 5 ? ((p.performance === "High" ? 1.15220854370174 : 0) + (p.performance === "Low" ? -3.66685719271104 : 0) + (p.performance === "Moderate" ? 1.27093883438938 : 0) + (p.performance === "Other" ? 1.24370981461992 : 0)) : 0) + (p.grade === 6 ? ((p.performance === "High" ? 1.10050532574309 : 0) + (p.performance === "Low" ? -3.2878124000574 : 0) + (p.performance === "Moderate" ? 0.918019438931251 : 0) + (p.performance === "Other" ? 1.26928763538306 : 0)) : 0) + (p.grade === 99 ? ((p.performance === "High" ? -1.03876693086711 : 0) + (p.performance === "Low" ? 5.12338888219945 : 0) + (p.performance === "Moderate" ? -1.6311593974893 : 0) + (p.performance === "Other" ? -2.45346255384304 : 0)) : 0)) + ((p.step === "01" ? ((p.performance === "High" ? 1.6634427705681 : 0) + (p.performance === "Low" ? -4.96259859933359 : 0) + (p.performance === "Moderate" ? 1.3576289445721 : 0) + (p.performance === "Other" ? 1.94152688419339 : 0)) : 0) + (p.step === "02" ? ((p.performance === "High" ? -2.49445610072458 : 0) + (p.performance === "Low" ? 7.27562867768896 : 0) + (p.performance === "Moderate" ? -2.59986471414093 : 0) + (p.performance === "Other" ? -2.18130786282344 : 0)) : 0) + (p.step === "03" ? ((p.performance === "High" ? 1.02782853283727 : 0) + (p.performance === "Low" ? -3.47724718053121 : 0) + (p.performance === "Moderate" ? 1.02748065248799 : 0) + (p.performance === "Other" ? 1.42193799520596 : 0)) : 0) + (p.step === "04" ? ((p.performance === "High" ? 1.01700010467347 : 0) + (p.performance === "Low" ? -3.16591833252503 : 0) + (p.performance === "Moderate" ? 0.894293239820707 : 0) + (p.performance === "Other" ? 1.25462498803086 : 0)) : 0) + (p.step === "05" ? ((p.performance === "High" ? -2.81832058948337 : 0) + (p.performance === "Low" ? 8.24459475375278 : 0) + (p.performance === "Moderate" ? -2.81222426996011 : 0) + (p.performance === "Other" ? -2.61404989430929 : 0)) : 0) + (p.step === "06" ? ((p.performance === "High" ? 0.929449060633001 : 0) + (p.performance === "Low" ? -2.82025160858977 : 0) + (p.performance === "Moderate" ? 0.840187067286284 : 0) + (p.performance === "Other" ? 1.05061548067048 : 0)) : 0) + (p.step === "07" ? ((p.performance === "High" ? 0.736437912319925 : 0) + (p.performance === "Low" ? -2.33413400790029 : 0) + (p.performance === "Moderate" ? 0.767084246179897 : 0) + (p.performance === "Other" ? 0.830611849400469 : 0)) : 0) + (p.step === "08" ? ((p.performance === "High" ? 0.951126883083067 : 0) + (p.performance === "Low" ? -3.17919391610398 : 0) + (p.performance === "Moderate" ? 0.950603516000601 : 0) + (p.performance === "Other" ? 1.27746351702031 : 0)) : 0) + (p.step === "09" ? ((p.performance === "High" ? 1.36309257082929 : 0) + (p.performance === "Low" ? -4.10503405391889 : 0) + (p.performance === "Moderate" ? 1.41486510547815 : 0) + (p.performance === "Other" ? 1.32707637761144 : 0)) : 0) + (p.step === "10" ? ((p.performance === "High" ? 1.24808522513392 : 0) + (p.performance === "Low" ? -3.68501581533066 : 0) + (p.performance === "Moderate" ? 1.2152167491442 : 0) + (p.performance === "Other" ? 1.22171384105254 : 0)) : 0) + (p.step === "11" ? ((p.performance === "High" ? -2.31080021309787 : 0) + (p.performance === "Low" ? 7.09384066583098 : 0) + (p.performance === "Moderate" ? -2.24570769015373 : 0) + (p.performance === "Other" ? -2.53733276257938 : 0)) : 0) + (p.step === "12" ? ((p.performance === "High" ? -2.12385400500026 : 0) + (p.performance === "Low" ? 6.6523264376702 : 0) + (p.performance === "Moderate" ? -2.09171961874743 : 0) + (p.performance === "Other" ? -2.43675281392252 : 0)) : 0) + (p.step === "13" ? ((p.performance === "High" ? -2.41133790309628 : 0) + (p.performance === "Low" ? 7.43420138221094 : 0) + (p.performance === "Moderate" ? -2.25417244450537 : 0) + (p.performance === "Other" ? -2.76869103460929 : 0)) : 0) + (p.step === "14" ? ((p.performance === "High" ? 1.43961108866258 : 0) + (p.performance === "Low" ? -4.29668476195186 : 0) + (p.performance === "Moderate" ? 1.78584928908126 : 0) + (p.performance === "Other" ? 1.07122438420802 : 0)) : 0) + (p.step === "X" ? ((p.performance === "High" ? 1.78269466266173 : 0) + (p.performance === "Low" ? -4.67451364096858 : 0) + (p.performance === "Moderate" ? 1.75047992745639 : 0) + (p.performance === "Other" ? 1.14133905085046 : 0)) : 0))  }, 
          retirement: function(p){ return 9.3437703030182 +  -0.138142026079924 * p.age  + -0.393237149121957 * p.tenure +((p.grade === 1 ? -0.353226064788553 : 0) + (p.grade === 2 ? 0.0438040652593647 : 0) + (p.grade === 3 ? 0.233296429011203 : 0) + (p.grade === 4 ? -0.0733782997011117 : 0) + (p.grade === 5 ? -0.415179665175816 : 0) + (p.grade === 6 ? -0.229548646151263 : 0) + (p.grade === 99 ? 0.794232181546176 : 0)) + ((p.step === "01" ? 0.252173088405634 : 0) + (p.step === "02" ? 0.0371634327988898 : 0) + (p.step === "03" ? -0.0610292458662982 : 0) + (p.step === "04" ? -0.264649897111126 : 0) + (p.step === "05" ? -0.0620151867773881 : 0) + (p.step === "06" ? -0.205324110203912 : 0) + (p.step === "07" ? 0.0326086202231305 : 0) + (p.step === "08" ? 0.164112388880878 : 0) + (p.step === "09" ? 0.156814837806383 : 0) + (p.step === "10" ? 0.293952468163835 : 0) + (p.step === "11" ? 0.0875338289995971 : 0) + (p.step === "12" ? -0.0857111208513282 : 0) + (p.step === "13" ? 0.162828270267329 : 0) + (p.step === "14" ? -0.22179455653143 : 0) + (p.step === "X" ? -0.286662818204194 : 0)) + ((p.performance === "High" ? -0.0509262416567139 : 0) + (p.performance === "Low" ? -1.11928228480534 : 0) + (p.performance === "Moderate" ? -0.302021309452206 : 0) + (p.performance === "Other" ? 1.47222983591426 : 0)) + 0.0055347945476801 * p.age_x_tenure + ((p.grade === 1 ? (p.age - 48.1493009257016) * 0.0304220031577212 : 0) + (p.grade === 2 ? (p.age - 48.1493009257016) * -0.0156860809834517 : 0) + (p.grade === 3 ? (p.age - 48.1493009257016) * -0.0246066505652767 : 0) + (p.grade === 4 ? (p.age - 48.1493009257016) * 0.00300812694963544 : 0) + (p.grade === 5 ? (p.age - 48.1493009257016) * 0.0311314792063437 : 0) + (p.grade === 6 ? (p.age - 48.1493009257016) * 0.021461523696531 : 0) + (p.grade === 99 ? (p.age - 48.1493009257016) * -0.0457304014615029 : 0)) + ((p.step === "01" ? (p.age - 48.1493009257016) * 0.0796764813813103 : 0) + (p.step === "02" ? (p.age - 48.1493009257016) * 0.050598700076142 : 0) + (p.step === "03" ? (p.age - 48.1493009257016) * 0.023894682864729 : 0) + (p.step === "04" ? (p.age - 48.1493009257016) * 0.0133977758400345 : 0) + (p.step === "05" ? (p.age - 48.1493009257016) * -0.00297009494127654 : 0) + (p.step === "06" ? (p.age - 48.1493009257016) * 0.0077590629372643 : 0) + (p.step === "07" ? (p.age - 48.1493009257016) * -0.0187191289921536 : 0) + (p.step === "08" ? (p.age - 48.1493009257016) * -0.0273555258331874 : 0) + (p.step === "09" ? (p.age - 48.1493009257016) * -0.0225835404541834 : 0) + (p.step === "10" ? (p.age - 48.1493009257016) * -0.0340733557856361 : 0) + (p.step === "11" ? (p.age - 48.1493009257016) * -0.0214255318564726 : 0) + (p.step === "12" ? (p.age - 48.1493009257016) * -0.00996475056695175 : 0) + (p.step === "13" ? (p.age - 48.1493009257016) * -0.0256334110511785 : 0) + (p.step === "14" ? (p.age - 48.1493009257016) * -0.00742263190652556 : 0) + (p.step === "X" ? (p.age - 48.1493009257016) * -0.00517873171191471 : 0)) + -0.45552600571677 * p.years_retirement_eligible  + (p.age - 48.1493009257016) * (( p.years_retirement_eligible  - (-8.09853930314698)) * 0.0155219689205345) +((p.occ4 === 610 ? 0.134339597373182 : 0) + (p.occ4 === 620 ? -0.172776187615558 : 0) + (p.occ4 === 621 ? 0.0384365902423765 : 0))  }, 
          involuntary: function(p){ return 4.75784598790458 + 0.0291066099004725 * p.tenure +((p.step === "01" ? -0.420158875317031 : 0) + (p.step === "02" ? 0.247156994118489 : 0) + (p.step === "03" ? -0.145105279035538 : 0) + (p.step === "04" ? 0.256179186542924 : 0) + (p.step === "05" ? -0.100313114583988 : 0) + (p.step === "06" ? 0.259291594545159 : 0) + (p.step === "07" ? 0.0117925736254307 : 0) + (p.step === "08" ? 0.0783161445116989 : 0) + (p.step === "09" ? -0.138248396483517 : 0) + (p.step === "10" ? -0.146605788955849 : 0) + (p.step === "11" ? 0.319310180279166 : 0) + (p.step === "12" ? 0.32989339514813 : 0) + (p.step === "13" ? -0.0596147786206668 : 0) + (p.step === "14" ? -0.10805573137426 : 0) + (p.step === "X" ? -0.383838104400148 : 0)) + ((p.performance === "High" ? 0.94235756084962 : 0) + (p.performance === "Low" ? -0.33907013179366 : 0) + (p.performance === "Moderate" ? 0.062374938008237 : 0) + (p.performance === "Other" ? -0.665662367064198 : 0)) + ((p.occ4 === 610 ? -0.119067732120457 : 0) + (p.occ4 === 620 ? 0.696538305397771 : 0) + (p.occ4 === 621 ? -0.577470573277314 : 0)) + (p.tenure - 10.6210840768816) * ((p.grade === 1 ? -0.0252134662138831 : 0) + (p.grade === 2 ? -0.0135920505661912 : 0) + (p.grade === 3 ? -0.0123004868003243 : 0) + (p.grade === 4 ? -0.00801135283328107 : 0) + (p.grade === 5 ? -0.0233786797678756 : 0) + (p.grade === 6 ? -0.01452233508477 : 0) + (p.grade === 99 ? 0.0970183712663253 : 0)) + (p.tenure - 10.6210840768816) * ((p.step === "01" ? 0.0103335562768226 : 0) + (p.step === "02" ? -0.0188715483207002 : 0) + (p.step === "03" ? -0.0182436142764291 : 0) + (p.step === "04" ? -0.0187795958435244 : 0) + (p.step === "05" ? -0.0103286665762555 : 0) + (p.step === "06" ? 0.00864166882145187 : 0) + (p.step === "07" ? -0.00814791008930001 : 0) + (p.step === "08" ? 0.000215497963388994 : 0) + (p.step === "09" ? 0.00465562611992073 : 0) + (p.step === "10" ? 0.0133646200165247 : 0) + (p.step === "11" ? 0.0101571855478625 : 0) + (p.step === "12" ? 0.0116822667300546 : 0) + (p.step === "13" ? -0.0016170969591065 : 0) + (p.step === "14" ? -0.00415333962491261 : 0) + (p.step === "X" ? 0.0210913502142024 : 0)) + (p.tenure - 10.6210840768816) * ((p.performance === "High" ? -0.00461647272978466 : 0) + (p.performance === "Low" ? 0.0428221792493065 : 0) + (p.performance === "Moderate" ? -0.00116495658638592 : 0) + (p.performance === "Other" ? -0.0370407499331359 : 0)) + ((p.grade === 1 ? ((p.performance === "High" ? -0.209334201443384 : 0) + (p.performance === "Low" ? 0.136827532820911 : 0) + (p.performance === "Moderate" ? -0.153825639372132 : 0) + (p.performance === "Other" ? 0.226332307994605 : 0)) : 0) + (p.grade === 2 ? ((p.performance === "High" ? -0.154548177250056 : 0) + (p.performance === "Low" ? -0.0549940477492389 : 0) + (p.performance === "Moderate" ? -0.0753830432155667 : 0) + (p.performance === "Other" ? 0.284925268214861 : 0)) : 0) + (p.grade === 3 ? ((p.performance === "High" ? -0.0561235645412122 : 0) + (p.performance === "Low" ? -0.255109897660682 : 0) + (p.performance === "Moderate" ? 0.132880184552879 : 0) + (p.performance === "Other" ? 0.178353277649015 : 0)) : 0) + (p.grade === 4 ? ((p.performance === "High" ? 0.348600687064457 : 0) + (p.performance === "Low" ? -0.600215014605298 : 0) + (p.performance === "Moderate" ? 0.19970733236913 : 0) + (p.performance === "Other" ? 0.0519069951717109 : 0)) : 0) + (p.grade === 5 ? ((p.performance === "High" ? 0.507667019697509 : 0) + (p.performance === "Low" ? -0.807982753957163 : 0) + (p.performance === "Moderate" ? 0.281649861933819 : 0) + (p.performance === "Other" ? 0.0186658723258347 : 0)) : 0) + (p.grade === 6 ? ((p.performance === "High" ? 0.595816264960786 : 0) + (p.performance === "Low" ? -0.970658427232322 : 0) + (p.performance === "Moderate" ? 0.358373348683863 : 0) + (p.performance === "Other" ? 0.0164688135876732 : 0)) : 0) + (p.grade === 99 ? ((p.performance === "High" ? -1.0320780284881 : 0) + (p.performance === "Low" ? 2.55213260838379 : 0) + (p.performance === "Moderate" ? -0.743402044951993 : 0) + (p.performance === "Other" ? -0.7766525349437 : 0)) : 0)) + ((p.step === "01" ? ((p.performance === "High" ? 0.0416053674169801 : 0) + (p.performance === "Low" ? -0.0622225198912983 : 0) + (p.performance === "Moderate" ? -0.132463232248691 : 0) + (p.performance === "Other" ? 0.15308038472301 : 0)) : 0) + (p.step === "02" ? ((p.performance === "High" ? -0.469289048307229 : 0) + (p.performance === "Low" ? 0.829133564678551 : 0) + (p.performance === "Moderate" ? -0.289906429909334 : 0) + (p.performance === "Other" ? -0.0699380864619876 : 0)) : 0) + (p.step === "03" ? ((p.performance === "High" ? -0.0310041755703539 : 0) + (p.performance === "Low" ? 0.0484611603235252 : 0) + (p.performance === "Moderate" ? -0.0682106207560182 : 0) + (p.performance === "Other" ? 0.0507536360028469 : 0)) : 0) + (p.step === "04" ? ((p.performance === "High" ? -0.328467718247065 : 0) + (p.performance === "Low" ? 0.814581766994255 : 0) + (p.performance === "Moderate" ? -0.322011323114752 : 0) + (p.performance === "Other" ? -0.164102725632439 : 0)) : 0) + (p.step === "05" ? ((p.performance === "High" ? 0.0167743531566307 : 0) + (p.performance === "Low" ? 0.0564762514870868 : 0) + (p.performance === "Moderate" ? 0.0591317845274859 : 0) + (p.performance === "Other" ? -0.132382389171203 : 0)) : 0) + (p.step === "06" ? ((p.performance === "High" ? -0.246033244427919 : 0) + (p.performance === "Low" ? 0.33564855002516 : 0) + (p.performance === "Moderate" ? -0.109170053847598 : 0) + (p.performance === "Other" ? 0.0195547482503563 : 0)) : 0) + (p.step === "07" ? ((p.performance === "High" ? -0.0795618834050911 : 0) + (p.performance === "Low" ? -0.354998856018317 : 0) + (p.performance === "Moderate" ? 0.190446186282578 : 0) + (p.performance === "Other" ? 0.24411455314083 : 0)) : 0) + (p.step === "08" ? ((p.performance === "High" ? -0.0140469094956793 : 0) + (p.performance === "Low" ? 0.0279106610054456 : 0) + (p.performance === "Moderate" ? 0.0858802815308802 : 0) + (p.performance === "Other" ? -0.0997440330406465 : 0)) : 0) + (p.step === "09" ? ((p.performance === "High" ? 0.142604946194986 : 0) + (p.performance === "Low" ? -0.48115537067085 : 0) + (p.performance === "Moderate" ? 0.227987432118713 : 0) + (p.performance === "Other" ? 0.110562992357152 : 0)) : 0) + (p.step === "10" ? ((p.performance === "High" ? 0.231121513258988 : 0) + (p.performance === "Low" ? -0.894787668346083 : 0) + (p.performance === "Moderate" ? 0.252487799002517 : 0) + (p.performance === "Other" ? 0.411178356084578 : 0)) : 0) + (p.step === "11" ? ((p.performance === "High" ? -0.0000276819009117061 : 0) + (p.performance === "Low" ? 0.407566791539097 : 0) + (p.performance === "Moderate" ? -0.149598417701959 : 0) + (p.performance === "Other" ? -0.257940691936227 : 0)) : 0) + (p.step === "12" ? ((p.performance === "High" ? -0.269229592152658 : 0) + (p.performance === "Low" ? 1.19294171229425 : 0) + (p.performance === "Moderate" ? -0.234518641335049 : 0) + (p.performance === "Other" ? -0.689193478806543 : 0)) : 0) + (p.step === "13" ? ((p.performance === "High" ? 0.588707468725976 : 0) + (p.performance === "Low" ? -0.762658136052143 : 0) + (p.performance === "Moderate" ? -0.0416597475763123 : 0) + (p.performance === "Other" ? 0.215610414902479 : 0)) : 0) + (p.step === "14" ? ((p.performance === "High" ? 0.029019359555682 : 0) + (p.performance === "Low" ? -0.30283832600437 : 0) + (p.performance === "Moderate" ? 0.1211990036837 : 0) + (p.performance === "Other" ? 0.152619962764988 : 0)) : 0) + (p.step === "X" ? ((p.performance === "High" ? 0.387827245197664 : 0) + (p.performance === "Low" ? -0.854059581364309 : 0) + (p.performance === "Moderate" ? 0.410405979343839 : 0) + (p.performance === "Other" ? 0.0558263568228063 : 0)) : 0)) + ((p.state === "19" ? -0.725790742740946 : 0) + (p.state === "25" ? -0.619732531122372 : 0) + (p.state === "40" ? -1.11932336669503 : 0) + (p.state === "57" ? -0.555715186634054 : 0) + (p.state === "C1" ? -0.903222995350118 : 0) + (p.state === "C10" ? -1.02363076048079 : 0) + (p.state === "C11" ? -0.784832813198019 : 0) + (p.state === "C12" ? -0.93506670707016 : 0) + (p.state === "C13" ? -0.724174329592517 : 0) + (p.state === "C14" ? -0.427842616825983 : 0) + (p.state === "C15" ? -0.596134269322525 : 0) + (p.state === "C2" ? -0.753793223342832 : 0) + (p.state === "C3" ? -0.852889167357007 : 0) + (p.state === "C4" ? -0.845063491613432 : 0) + (p.state === "C5" ? -1.01070754429365 : 0) + (p.state === "C6" ? -0.632124650835444 : 0) + (p.state === "C7" ? -0.990013393364984 : 0) + (p.state === "C8" ? -1.0313581455193 : 0) + (p.state === "C9" ? -0.929855754137079 : 0) + (p.state === "RP" ? 15.4612716894962 : 0)) + ((p.grade === 1 ? ((p.occ4 === 610 ? 0.144250405343573 : 0) + (p.occ4 === 620 ? 0.106865140891585 : 0) + (p.occ4 === 621 ? -0.251115546235158 : 0)) : 0) + (p.grade === 2 ? ((p.occ4 === 610 ? 0.578336717948557 : 0) + (p.occ4 === 620 ? 0.232575369645842 : 0) + (p.occ4 === 621 ? -0.810912087594399 : 0)) : 0) + (p.grade === 3 ? ((p.occ4 === 610 ? 0.615318283263737 : 0) + (p.occ4 === 620 ? -0.379046498264729 : 0) + (p.occ4 === 621 ? -0.236271784999008 : 0)) : 0) + (p.grade === 4 ? ((p.occ4 === 610 ? 0.141460011687401 : 0) + (p.occ4 === 620 ? -0.317181978920281 : 0) + (p.occ4 === 621 ? 0.17572196723288 : 0)) : 0) + (p.grade === 5 ? ((p.occ4 === 610 ? 0.253367232906506 : 0) + (p.occ4 === 620 ? -0.5502554526436 : 0) + (p.occ4 === 621 ? 0.296888219737095 : 0)) : 0) + (p.grade === 6 ? ((p.occ4 === 610 ? -0.671026439888619 : 0) + (p.occ4 === 620 ? -0.269129047984407 : 0) + (p.occ4 === 621 ? 0.940155487873026 : 0)) : 0) + (p.grade === 99 ? ((p.occ4 === 610 ? -1.06170621126116 : 0) + (p.occ4 === 620 ? 1.17617246727559 : 0) + (p.occ4 === 621 ? -0.114466256014435 : 0)) : 0)) + ((p.performance === "High" ? ((p.occ4 === 610 ? 0.548036563626659 : 0) + (p.occ4 === 620 ? -0.503905207286183 : 0) + (p.occ4 === 621 ? -0.0441313563404767 : 0)) : 0) + (p.performance === "Low" ? ((p.occ4 === 610 ? -1.1027972018653 : 0) + (p.occ4 === 620 ? 0.988471272943422 : 0) + (p.occ4 === 621 ? 0.114325928921879 : 0)) : 0) + (p.performance === "Moderate" ? ((p.occ4 === 610 ? 0.3366282805443 : 0) + (p.occ4 === 620 ? -0.268687215278675 : 0) + (p.occ4 === 621 ? -0.0679410652656247 : 0)) : 0) + (p.performance === "Other" ? ((p.occ4 === 610 ? 0.218132357694343 : 0) + (p.occ4 === 620 ? -0.215878850378564 : 0) + (p.occ4 === 621 ? -0.00225350731577806 : 0)) : 0)) + (p.tenure - 10.6210840768816) * ((p.occ4 === 610 ? -0.00182345614298577 : 0) + (p.occ4 === 620 ? -0.00560357770483178 : 0) + (p.occ4 === 621 ? 0.00742703384781755 : 0)) + -0.0688795086396081 * p.unemployment_rate  }, 
          voluntary: function(p){ return 2.22467075300379  + 0.0766737945105903 * p.tenure +((p.step === "01" ? -0.335860540406219 : 0) + (p.step === "02" ? -0.707102599851009 : 0) + (p.step === "03" ? -0.321078749275901 : 0) + (p.step === "04" ? -0.237852450699345 : 0) + (p.step === "05" ? 0.245421803377515 : 0) + (p.step === "06" ? -0.259898375283134 : 0) + (p.step === "07" ? 0.169162628886531 : 0) + (p.step === "08" ? 0.312358392152525 : 0) + (p.step === "09" ? 0.190213119220372 : 0) + (p.step === "10" ? 0.158047064942749 : 0) + (p.step === "11" ? 0.146441694934586 : 0) + (p.step === "12" ? 0.194643027298997 : 0) + (p.step === "13" ? 0.198813381425905 : 0) + (p.step === "14" ? 0.598067839705522 : 0) + (p.step === "X" ? -0.351376236429095 : 0)) + ((p.performance === "High" ? 0.910900048638191 : 0) + (p.performance === "Low" ? -0.822078363644651 : 0) + (p.performance === "Moderate" ? 0.433167407263665 : 0) + (p.performance === "Other" ? -0.521989092257206 : 0)) + ((p.occ4 === 610 ? -0.268903531657875 : 0) + (p.occ4 === 620 ? 0.154356669386579 : 0) + (p.occ4 === 621 ? 0.114546862271296 : 0)) + (p.tenure - 10.6210840768816) * ((p.grade === 1 ? -0.0202098112268184 : 0) + (p.grade === 2 ? -0.00288388361080164 : 0) + (p.grade === 3 ? 0.0142348338453753 : 0) + (p.grade === 4 ? 0.00496571014791193 : 0) + (p.grade === 5 ? -0.0253096934018031 : 0) + (p.grade === 6 ? 0.00549047597296124 : 0) + (p.grade === 99 ? 0.0237123682731747 : 0)) + (p.tenure - 10.6210840768816) * ((p.step === "01" ? -0.00499139862827181 : 0) + (p.step === "02" ? -0.0276634397028894 : 0) + (p.step === "03" ? -0.00430220637796101 : 0) + (p.step === "04" ? -0.00614299028934839 : 0) + (p.step === "05" ? -0.00581471067037915 : 0) + (p.step === "06" ? 0.0102449673524065 : 0) + (p.step === "07" ? -0.00820877565476439 : 0) + (p.step === "08" ? 0.0140891089180803 : 0) + (p.step === "09" ? -0.00121031693418042 : 0) + (p.step === "10" ? 0.0124920110547507 : 0) + (p.step === "11" ? 0.00355074571413087 : 0) + (p.step === "12" ? 0.00785952110053315 : 0) + (p.step === "13" ? 0.0150270507434031 : 0) + (p.step === "14" ? 0.00359616279073003 : 0) + (p.step === "X" ? -0.00852572941624008 : 0)) + (p.tenure - 10.6210840768816) * ((p.performance === "High" ? 0.0174289053810492 : 0) + (p.performance === "Low" ? 0.0285478541178448 : 0) + (p.performance === "Moderate" ? 0.00877750272895115 : 0) + (p.performance === "Other" ? -0.0547542622278451 : 0)) + ((p.grade === 1 ? ((p.performance === "High" ? -0.218690697653835 : 0) + (p.performance === "Low" ? 0.393380048156569 : 0) + (p.performance === "Moderate" ? -0.10460197257592 : 0) + (p.performance === "Other" ? -0.0700873779268142 : 0)) : 0) + (p.grade === 2 ? ((p.performance === "High" ? 0.0368365005350837 : 0) + (p.performance === "Low" ? 0.126901361720918 : 0) + (p.performance === "Moderate" ? -0.0322861693474599 : 0) + (p.performance === "Other" ? -0.131451692908541 : 0)) : 0) + (p.grade === 3 ? ((p.performance === "High" ? -0.368656525487243 : 0) + (p.performance === "Low" ? 1.106589970476 : 0) + (p.performance === "Moderate" ? -0.44380593041391 : 0) + (p.performance === "Other" ? -0.294127514574845 : 0)) : 0) + (p.grade === 4 ? ((p.performance === "High" ? -0.338579669805929 : 0) + (p.performance === "Low" ? 0.88255125278361 : 0) + (p.performance === "Moderate" ? -0.383626251155473 : 0) + (p.performance === "Other" ? -0.160345331822208 : 0)) : 0) + (p.grade === 5 ? ((p.performance === "High" ? -0.200677709751188 : 0) + (p.performance === "Low" ? 0.752430414376169 : 0) + (p.performance === "Moderate" ? -0.30983081393417 : 0) + (p.performance === "Other" ? -0.241921890690811 : 0)) : 0) + (p.grade === 6 ? ((p.performance === "High" ? 0.350464151902153 : 0) + (p.performance === "Low" ? -1.00291837923726 : 0) + (p.performance === "Moderate" ? 0.338499485594149 : 0) + (p.performance === "Other" ? 0.313954741740955 : 0)) : 0) + (p.grade === 99 ? ((p.performance === "High" ? 0.739303950260958 : 0) + (p.performance === "Low" ? -2.258934668276 : 0) + (p.performance === "Moderate" ? 0.935651651832783 : 0) + (p.performance === "Other" ? 0.583979066182264 : 0)) : 0)) + ((p.step === "01" ? ((p.performance === "High" ? -0.12579332038639 : 0) + (p.performance === "Low" ? 0.39534512496207 : 0) + (p.performance === "Moderate" ? -0.159554282717407 : 0) + (p.performance === "Other" ? -0.109997521858273 : 0)) : 0) + (p.step === "02" ? ((p.performance === "High" ? 0.0192767439766578 : 0) + (p.performance === "Low" ? -0.438687398372229 : 0) + (p.performance === "Moderate" ? 0.101725214526829 : 0) + (p.performance === "Other" ? 0.317685439868742 : 0)) : 0) + (p.step === "03" ? ((p.performance === "High" ? -0.0632246432367034 : 0) + (p.performance === "Low" ? 0.0373142221649898 : 0) + (p.performance === "Moderate" ? -0.0561003925706963 : 0) + (p.performance === "Other" ? 0.0820108136424099 : 0)) : 0) + (p.step === "04" ? ((p.performance === "High" ? -0.0935938357365026 : 0) + (p.performance === "Low" ? 0.0252171966251992 : 0) + (p.performance === "Moderate" ? 0.0340811935972133 : 0) + (p.performance === "Other" ? 0.0342954455140901 : 0)) : 0) + (p.step === "05" ? ((p.performance === "High" ? -0.529120794194181 : 0) + (p.performance === "Low" ? 1.40543602285986 : 0) + (p.performance === "Moderate" ? -0.458381486745127 : 0) + (p.performance === "Other" ? -0.417933741920553 : 0)) : 0) + (p.step === "06" ? ((p.performance === "High" ? 0.130188062677769 : 0) + (p.performance === "Low" ? -0.601768552604951 : 0) + (p.performance === "Moderate" ? 0.198076512794334 : 0) + (p.performance === "Other" ? 0.273503977132848 : 0)) : 0) + (p.step === "07" ? ((p.performance === "High" ? -0.35417712681976 : 0) + (p.performance === "Low" ? 0.862908597108859 : 0) + (p.performance === "Moderate" ? -0.295359960820334 : 0) + (p.performance === "Other" ? -0.213371509468764 : 0)) : 0) + (p.step === "08" ? ((p.performance === "High" ? -0.191816498215107 : 0) + (p.performance === "Low" ? 0.567490258573951 : 0) + (p.performance === "Moderate" ? -0.239508868930587 : 0) + (p.performance === "Other" ? -0.136164891428257 : 0)) : 0) + (p.step === "09" ? ((p.performance === "High" ? -0.0986571995571821 : 0) + (p.performance === "Low" ? 0.27754649584814 : 0) + (p.performance === "Moderate" ? 0.0220704266489956 : 0) + (p.performance === "Other" ? -0.200959722939954 : 0)) : 0) + (p.step === "10" ? ((p.performance === "High" ? 0.0753916748853696 : 0) + (p.performance === "Low" ? -0.0199560637819625 : 0) + (p.performance === "Moderate" ? -0.0194275774518228 : 0) + (p.performance === "Other" ? -0.0360080336515843 : 0)) : 0) + (p.step === "11" ? ((p.performance === "High" ? 0.241783957921681 : 0) + (p.performance === "Low" ? -0.197809274687502 : 0) + (p.performance === "Moderate" ? 0.052912338788214 : 0) + (p.performance === "Other" ? -0.0968870220223923 : 0)) : 0) + (p.step === "12" ? ((p.performance === "High" ? 0.164469404251421 : 0) + (p.performance === "Low" ? -0.364316353126878 : 0) + (p.performance === "Moderate" ? 0.170189415168558 : 0) + (p.performance === "Other" ? 0.0296575337068987 : 0)) : 0) + (p.step === "13" ? ((p.performance === "High" ? 0.172955792415961 : 0) + (p.performance === "Low" ? -0.723190359132094 : 0) + (p.performance === "Moderate" ? 0.293614814224399 : 0) + (p.performance === "Other" ? 0.256619752491733 : 0)) : 0) + (p.step === "14" ? ((p.performance === "High" ? -0.0116568548011486 : 0) + (p.performance === "Low" ? 0.679693129611766 : 0) + (p.performance === "Moderate" ? -0.152593176951976 : 0) + (p.performance === "Other" ? -0.515443097858641 : 0)) : 0) + (p.step === "X" ? ((p.performance === "High" ? 0.663974636818117 : 0) + (p.performance === "Low" ? -1.90522304604922 : 0) + (p.performance === "Moderate" ? 0.508255830439406 : 0) + (p.performance === "Other" ? 0.732992578791697 : 0)) : 0)) + ((p.state === "19" ? -0.259975490611742 : 0) + (p.state === "25" ? 0.285828035760054 : 0) + (p.state === "40" ? -0.529421182234831 : 0) + (p.state === "57" ? 1.17449484427596 : 0) + (p.state === "C1" ? -0.617866919614235 : 0) + (p.state === "C10" ? 0.00824285694976035 : 0) + (p.state === "C11" ? -0.125198416345659 : 0) + (p.state === "C12" ? -0.251469904804433 : 0) + (p.state === "C13" ? -0.0881898483989233 : 0) + (p.state === "C14" ? 0.690076086703561 : 0) + (p.state === "C15" ? 0.170402468522116 : 0) + (p.state === "C2" ? -0.240292193352171 : 0) + (p.state === "C3" ? 0.075037257482026 : 0) + (p.state === "C4" ? -0.241260209828166 : 0) + (p.state === "C5" ? 0.22679437919384 : 0) + (p.state === "C6" ? -0.07314729458143 : 0) + (p.state === "C7" ? -0.129787696389101 : 0) + (p.state === "C8" ? 0.192712606671211 : 0) + (p.state === "C9" ? -0.519732789365789 : 0) + (p.state === "RP" ? 0.252753409967955 : 0)) + ((p.grade === 1 ? ((p.occ4 === 610 ? -0.428440686558453 : 0) + (p.occ4 === 620 ? 1.22089282887121 : 0) + (p.occ4 === 621 ? -0.792452142312761 : 0)) : 0) + (p.grade === 2 ? ((p.occ4 === 610 ? 0.0432682966755861 : 0) + (p.occ4 === 620 ? 0.806801533864194 : 0) + (p.occ4 === 621 ? -0.85006983053978 : 0)) : 0) + (p.grade === 3 ? ((p.occ4 === 610 ? 0.347690437372295 : 0) + (p.occ4 === 620 ? -0.220674730419722 : 0) + (p.occ4 === 621 ? -0.127015706952573 : 0)) : 0) + (p.grade === 4 ? ((p.occ4 === 610 ? 0.385138007533901 : 0) + (p.occ4 === 620 ? -0.311437334840369 : 0) + (p.occ4 === 621 ? -0.0737006726935328 : 0)) : 0) + (p.grade === 5 ? ((p.occ4 === 610 ? 0.441583343235935 : 0) + (p.occ4 === 620 ? -0.309755031324209 : 0) + (p.occ4 === 621 ? -0.131828311911726 : 0)) : 0) + (p.grade === 6 ? ((p.occ4 === 610 ? 0.387866001832167 : 0) + (p.occ4 === 620 ? -0.381089955587793 : 0) + (p.occ4 === 621 ? -0.00677604624437328 : 0)) : 0) + (p.grade === 99 ? ((p.occ4 === 610 ? -1.17710540009143 : 0) + (p.occ4 === 620 ? -0.804737310563314 : 0) + (p.occ4 === 621 ? 1.98184271065475 : 0)) : 0)) + ((p.performance === "High" ? ((p.occ4 === 610 ? 0.081736621282783 : 0) + (p.occ4 === 620 ? -0.284966158496016 : 0) + (p.occ4 === 621 ? 0.203229537213233 : 0)) : 0) + (p.performance === "Low" ? ((p.occ4 === 610 ? -0.205607759446481 : 0) + (p.occ4 === 620 ? 0.781343621809928 : 0) + (p.occ4 === 621 ? -0.575735862363448 : 0)) : 0) + (p.performance === "Moderate" ? ((p.occ4 === 610 ? 0.0673911720816861 : 0) + (p.occ4 === 620 ? -0.270908954674824 : 0) + (p.occ4 === 621 ? 0.203517782593138 : 0)) : 0) + (p.performance === "Other" ? ((p.occ4 === 610 ? 0.0564799660820119 : 0) + (p.occ4 === 620 ? -0.225468508639088 : 0) + (p.occ4 === 621 ? 0.168988542557076 : 0)) : 0)) + (p.tenure - 10.6210840768816) * ((p.occ4 === 610 ? 0.0151808470659603 : 0) + (p.occ4 === 620 ? -0.00996697612486687 : 0) + (p.occ4 === 621 ? -0.00521387094109342 : 0)) + 0.0413668801603769 * p.unemployment_rate  }, 
          none: function(p){ return 0; }
        };


        
        self.step_models = {
          step_down: function(data){ return (-20.084050741714) + ((p.step === 0 ? 0 : 0) + (p.step === 1 ? 0.216659677258928 : 0) + (p.step === 2 ? 18.1548141957705 : 0) + (p.step === 3 ? 18.5660869907765 : 0) + (p.step === 4 ? 19.2782690159414 : 0) + (p.step === 5 ? 19.5618870577392 : 0) + (p.step === 6 ? 20.110496395239 : 0) + (p.step === 7 ? 20.5512255623261 : 0) + (p.step === 8 ? 20.9767710334984 : 0) + (p.step === 9 ? 21.0672554067437 : 0) + (p.step === 10 ? 22.1133328226126 : 0) + (p.step === 11 ? 20.6831970313653 : 0) + (p.step === 12 ? 22.1085644830859 : 0) + (p.step === 13 ? 30.2088902549905 : 0) + (p.step === 14 ? 22.3539008154261 : 0) + (p.step === 15 ? 30.6780917304973 : 0) + (p.step === 16 ? 30.5094919517443 : 0) + (p.step === 17 ? 31.0340103310654 : 0) + (p.step === 18 ? 30.5862066726565 : 0) + (p.step === 19 ? 30.3591246237947 : 0) + (p.step === 20 ? 30.2604515896164 : 0)) + ((p.grade === 1 ? 0 : 0) + (p.grade === 2 ? -0.332283037728767 : 0) + (p.grade === 3 ? -0.665942308534808 : 0) + (p.grade === 4 ? 0.989957155812378 : 0) + (p.grade === 5 ? -0.940604613839707 : 0) + (p.grade === 6 ? -0.785321851242901 : 0)) + ((p.promo === 0 ? 0.81227930830644 : 0) + (p.promo === 1 ? -0.81227930830644 : 0)) +((p.step === 0 ? ((p.promo === 0 ? 0 : 0) + (p.promo === 1 ? 0 : 0)) : 0) + (p.step === 1 ? ((p.promo === 0 ? -0.891723528745483 : 0) + (p.promo === 1 ? 0.891723528745483 : 0)) : 0) + (p.step === 2 ? ((p.promo === 0 ? -2.71471422733431 : 0) + (p.promo === 1 ? 2.71471422733431 : 0)) : 0) + (p.step === 3 ? ((p.promo === 0 ? -2.66617132672724 : 0) + (p.promo === 1 ? 2.66617132672724 : 0)) : 0) + (p.step === 4 ? ((p.promo === 0 ? -2.86016636440897 : 0) + (p.promo === 1 ? 2.86016636440897 : 0)) : 0) + (p.step === 5 ? ((p.promo === 0 ? -3.32079576736312 : 0) + (p.promo === 1 ? 3.32079576736312 : 0)) : 0) + (p.step === 6 ? ((p.promo === 0 ? -3.49895406005211 : 0) + (p.promo === 1 ? 3.49895406005211 : 0)) : 0) + (p.step === 7 ? ((p.promo === 0 ? -3.52843992565236 : 0) + (p.promo === 1 ? 3.52843992565236 : 0)) : 0) + (p.step === 8 ? ((p.promo === 0 ? -3.75920121942879 : 0) + (p.promo === 1 ? 3.75920121942879 : 0)) : 0) + (p.step === 9 ? ((p.promo === 0 ? -4.04245841610019 : 0) + (p.promo === 1 ? 4.04245841610019 : 0)) : 0) + (p.step === 10 ? ((p.promo === 0 ? -4.68236681484623 : 0) + (p.promo === 1 ? 4.68236681484623 : 0)) : 0) + (p.step === 11 ? ((p.promo === 0 ? -3.81405118216922 : 0) + (p.promo === 1 ? 3.81405118216922 : 0)) : 0) + (p.step === 12 ? ((p.promo === 0 ? -3.29462687221908 : 0) + (p.promo === 1 ? 3.29462687221908 : 0)) : 0) + (p.step === 13 ? ((p.promo === 0 ? -11.8184199763273 : 0) + (p.promo === 1 ? 11.8184199763273 : 0)) : 0) + (p.step === 14 ? ((p.promo === 0 ? -3.12666487412997 : 0) + (p.promo === 1 ? 3.12666487412997 : 0)) : 0) + (p.step === 15 ? ((p.promo === 0 ? -11.4007225257875 : 0) + (p.promo === 1 ? 11.4007225257875 : 0)) : 0) + (p.step === 16 ? ((p.promo === 0 ? -11.568327443834 : 0) + (p.promo === 1 ? 11.568327443834 : 0)) : 0) + (p.step === 17 ? ((p.promo === 0 ? -11.0840745456286 : 0) + (p.promo === 1 ? 11.0840745456286 : 0)) : 0) + (p.step === 18 ? ((p.promo === 0 ? -11.4713690325614 : 0) + (p.promo === 1 ? 11.4713690325614 : 0)) : 0) + (p.step === 19 ? ((p.promo === 0 ? -11.6885145616567 : 0) + (p.promo === 1 ? 11.6885145616567 : 0)) : 0) + (p.step === 20 ? ((p.promo === 0 ? -11.7871878524266 : 0) + (p.promo === 1 ? 11.7871878524266 : 0)) : 0)) }, 
          step_same: function(data){ return (-11.2551421080706) + ((p.step === 0 ? 0 : 0) + (p.step === 1 ? 10.0140924638715 : 0) + (p.step === 2 ? 9.74212944469716 : 0) + (p.step === 3 ? 9.79298488312336 : 0) + (p.step === 4 ? 10.4714909436465 : 0) + (p.step === 5 ? 10.6381107661565 : 0) + (p.step === 6 ? 10.6749284575901 : 0) + (p.step === 7 ? 10.9167903239378 : 0) + (p.step === 8 ? 11.0053303420607 : 0) + (p.step === 9 ? 11.1716246214411 : 0) + (p.step === 10 ? 12.3397050319969 : 0) + (p.step === 11 ? 10.8891581792619 : 0) + (p.step === 12 ? 12.2733067844737 : 0) + (p.step === 13 ? 19.7684676159858 : 0) + (p.step === 14 ? 11.3160753563466 : 0) + (p.step === 15 ? 11.5298897666281 : 0) + (p.step === 16 ? 11.5364753027991 : 0) + (p.step === 17 ? 11.8958806856261 : 0) + (p.step === 18 ? 11.8362282304226 : 0) + (p.step === 19 ? 12.2901669727569 : 0) + (p.step === 20 ? 12.1754170113946 : 0)) + ((p.grade === 1 ? 0 : 0) + (p.grade === 2 ? 1.19464086782853 : 0) + (p.grade === 3 ? 0.957955429666787 : 0) + (p.grade === 4 ? 1.32469125094646 : 0) + (p.grade === 5 ? 1.08449691132663 : 0) + (p.grade === 6 ? 1.53231411337669 : 0)) + ((p.promo === 0 ? 10.8016604939387 : 0) + (p.promo === 1 ? -10.8016604939387 : 0)) +((p.step === 0 ? ((p.promo === 0 ? 0 : 0) + (p.promo === 1 ? 0 : 0)) : 0) + (p.step === 1 ? ((p.promo === 0 ? -11.6043231642355 : 0) + (p.promo === 1 ? 11.6043231642355 : 0)) : 0) + (p.step === 2 ? ((p.promo === 0 ? -11.0779922816754 : 0) + (p.promo === 1 ? 11.0779922816754 : 0)) : 0) + (p.step === 3 ? ((p.promo === 0 ? -11.1518915916444 : 0) + (p.promo === 1 ? 11.1518915916444 : 0)) : 0) + (p.step === 4 ? ((p.promo === 0 ? -11.0750792997767 : 0) + (p.promo === 1 ? 11.0750792997767 : 0)) : 0) + (p.step === 5 ? ((p.promo === 0 ? -11.3509866452545 : 0) + (p.promo === 1 ? 11.3509866452545 : 0)) : 0) + (p.step === 6 ? ((p.promo === 0 ? -11.2889922009235 : 0) + (p.promo === 1 ? 11.2889922009235 : 0)) : 0) + (p.step === 7 ? ((p.promo === 0 ? -11.3689075771677 : 0) + (p.promo === 1 ? 11.3689075771677 : 0)) : 0) + (p.step === 8 ? ((p.promo === 0 ? -11.2343516674652 : 0) + (p.promo === 1 ? 11.2343516674652 : 0)) : 0) + (p.step === 9 ? ((p.promo === 0 ? -11.4602340293705 : 0) + (p.promo === 1 ? 11.4602340293705 : 0)) : 0) + (p.step === 10 ? ((p.promo === 0 ? -11.8334153366884 : 0) + (p.promo === 1 ? 11.8334153366884 : 0)) : 0) + (p.step === 11 ? ((p.promo === 0 ? -11.1291675546809 : 0) + (p.promo === 1 ? 11.1291675546809 : 0)) : 0) + (p.step === 12 ? ((p.promo === 0 ? -9.28903446076353 : 0) + (p.promo === 1 ? 9.28903446076353 : 0)) : 0) + (p.step === 13 ? ((p.promo === 0 ? -19.2743264691955 : 0) + (p.promo === 1 ? 19.2743264691955 : 0)) : 0) + (p.step === 14 ? ((p.promo === 0 ? -9.88986475853208 : 0) + (p.promo === 1 ? 9.88986475853208 : 0)) : 0) + (p.step === 15 ? ((p.promo === 0 ? -10.2355432757383 : 0) + (p.promo === 1 ? 10.2355432757383 : 0)) : 0) + (p.step === 16 ? ((p.promo === 0 ? -10.236657522666 : 0) + (p.promo === 1 ? 10.236657522666 : 0)) : 0) + (p.step === 17 ? ((p.promo === 0 ? -9.89160932553364 : 0) + (p.promo === 1 ? 9.89160932553364 : 0)) : 0) + (p.step === 18 ? ((p.promo === 0 ? -10.1146556096005 : 0) + (p.promo === 1 ? 10.1146556096005 : 0)) : 0) + (p.step === 19 ? ((p.promo === 0 ? -9.76663531453711 : 0) + (p.promo === 1 ? 9.76663531453711 : 0)) : 0) + (p.step === 20 ? ((p.promo === 0 ? -9.88138576386518 : 0) + (p.promo === 1 ? 9.88138576386518 : 0)) : 0))  }, 
          step_up: function(p){ return 0; }
        };



        return self;
        };


  return function(spec){
    return evolution(spec);
  };
});