var retirement_model_formula = function(d){
  var logit = -28.93320997,
      grade_by_step = {
        'ALL OTHER 610': 0.83439235,
        'ALL OTHER 620': 0.833713794,
        'ALL OTHER 621': 1.722244049,
        occ_610_grade_1_step_10: 1.389078356,
        occ_610_grade_1_step_11: 0.660343053,
        occ_610_grade_1_step_12: 0.93095039,
        occ_610_grade_1_step_13: 1.185066428,
        occ_610_grade_1_step_14: 1.358914065,
        occ_610_grade_1_step_X: 1.278989905,
        occ_610_grade_1_step_02: -10.684253,
        occ_610_grade_1_step_03: 0.996921578,
        occ_610_grade_1_step_04: 1.739218072,
        occ_610_grade_1_step_05: -0.205619248,
        occ_610_grade_1_step_06: 0.636260613,
        occ_610_grade_1_step_07: 1.000814483,
        occ_610_grade_1_step_08: 0.654672823,
        occ_610_grade_1_step_09: 0.830549228,
        occ_610_grade_1_step_01: -4.321533862,
        occ_610_grade_2_step_10: 1.292525586,
        occ_610_grade_2_step_11: 0.93278106,
        occ_610_grade_2_step_12: 1.024514732,
        occ_610_grade_2_step_13: 0.981719261,
        occ_610_grade_2_step_14: 1.103718709,
        occ_610_grade_2_step_X: 1.124364524,
        occ_610_grade_2_step_02: 0.990236284,
        occ_610_grade_2_step_03: 1.157726051,
        occ_610_grade_2_step_04: 0.91492948,
        occ_610_grade_2_step_05: 1.031076992,
        occ_610_grade_2_step_06: 0.962950918,
        occ_610_grade_2_step_07: 0.944854817,
        occ_610_grade_2_step_08: 1.142727429,
        occ_610_grade_2_step_09: 1.16542303,
        occ_610_grade_2_step_01: 1.479174353,
        occ_610_grade_3_step_10: 0.699913011,
        occ_610_grade_3_step_11: 0.919538135,
        occ_610_grade_3_step_12: 1.119384889,
        occ_610_grade_3_step_13: 0.791545909,
        occ_610_grade_3_step_14: 0.540538879,
        occ_610_grade_3_step_X: 1.564760956,
        occ_610_grade_3_step_02: -1.011648481,
        occ_610_grade_3_step_03: 1.446984059,
        occ_610_grade_3_step_04: 1.072937805,
        occ_610_grade_3_step_05: 0.420299871,
        occ_610_grade_3_step_06: 1.204042551,
        occ_610_grade_3_step_07: 0.804791062,
        occ_610_grade_3_step_08: 0.892107013,
        occ_610_grade_3_step_09: 0.961176368,
        occ_610_grade_3_step_01: -0.38834726,
        occ_610_grade_4_step_10: 1.581048764,
        occ_610_grade_4_step_11: 1.362016139,
        occ_610_grade_4_step_12: 1.220993334,
        occ_610_grade_4_step_13: -8.362169419,
        occ_610_grade_4_step_14: 14.49286748,
        occ_610_grade_4_step_X: 1.370880945,
        occ_610_grade_4_step_02: 0.849861953,
        occ_610_grade_4_step_03: -1.298534377,
        occ_610_grade_4_step_04: 0.495867209,
        occ_610_grade_4_step_05: 1.177643539,
        occ_610_grade_4_step_06: -0.777565044,
        occ_610_grade_4_step_07: 0.871188603,
        occ_610_grade_4_step_08: 1.826613571,
        occ_610_grade_4_step_09: 0.401487657,
        occ_610_grade_4_step_01: 3.070929033,
        occ_620_grade_4_step_10: 1.336513466,
        occ_620_grade_4_step_02: 2.385350477,
        occ_620_grade_4_step_03: 0.368574349,
        occ_620_grade_4_step_04: 2.104037393,
        occ_620_grade_4_step_05: -1.550661874,
        occ_620_grade_4_step_06: -130.7087572,
        occ_620_grade_4_step_07: -4.491763276,
        occ_620_grade_4_step_08: -4.34791541,
        occ_620_grade_4_step_09: -8.482399157,
        occ_620_grade_4_step_01: -4.28319326,
        occ_620_grade_5_step_10: 1.375551959,
        occ_620_grade_5_step_02: 1.451894119,
        occ_620_grade_5_step_03: 1.993129691,
        occ_620_grade_5_step_04: 1.739806965,
        occ_620_grade_5_step_05: 0.23898086,
        occ_620_grade_5_step_06: 1.194904156,
        occ_620_grade_5_step_07: 1.574229485,
        occ_620_grade_5_step_08: 0.655788965,
        occ_620_grade_5_step_09: 1.860273509,
        occ_620_grade_5_step_01: -4.78845783,
        occ_620_grade_6_step_10: 1.216872822,
        occ_620_grade_6_step_02: 0.944601965,
        occ_620_grade_6_step_03: 0.309065135,
        occ_620_grade_6_step_04: 1.005257636,
        occ_620_grade_6_step_05: 1.535235273,
        occ_620_grade_6_step_06: 1.684743527,
        occ_620_grade_6_step_07: 1.828006181,
        occ_620_grade_6_step_08: 1.297276402,
        occ_620_grade_6_step_09: 0.837307893,
        occ_620_grade_6_step_01: 1.141131904,
        occ_621_grade_4_step_10: 1.803252958,
        occ_621_grade_4_step_X: 42.29000727,
        occ_621_grade_4_step_02: -0.396688342,
        occ_621_grade_4_step_03: 0.438745861,
        occ_621_grade_4_step_04: 1.708876296,
        occ_621_grade_4_step_05: 1.467528089,
        occ_621_grade_4_step_06: 1.839512142,
        occ_621_grade_4_step_07: 2.820197342,
        occ_621_grade_4_step_08: 3.944358236,
        occ_621_grade_4_step_09: 0.237342391,
        occ_621_grade_4_step_01: 0.723536122,
        occ_621_grade_5_step_10: 1.112861656,
        occ_621_grade_5_step_02: -0.461187937,
        occ_621_grade_5_step_03: 1.158465181,
        occ_621_grade_5_step_04: 1.738776228,
        occ_621_grade_5_step_05: 1.483810919,
        occ_621_grade_5_step_06: 1.657867429,
        occ_621_grade_5_step_07: 1.136457958,
        occ_621_grade_5_step_08: 1.235670468,
        occ_621_grade_5_step_09: 0.682987878,
        occ_621_grade_5_step_01: -0.836795605,
        occ_621_grade_6_step_02: 2.349344518,
        occ_621_grade_6_step_03: 3.685922842,
        occ_621_grade_6_step_04: 1.977290912,
        occ_621_grade_6_step_05: 0.721787629,
        occ_621_grade_6_step_06: 2.896776642,
        occ_621_grade_6_step_07: 3.892954592,
        occ_621_grade_6_step_08: -0.008024771,
        occ_621_grade_6_step_09: 3.819451235,
        occ_621_grade_6_step_01: -4.883868012
      },
      grade_by_step_X_tenure = {
        'ALL OTHER 610':  0.015451692,
        'ALL OTHER 620':  0.01323057,
        'ALL OTHER 621':  -0.013857785,
        'occ_610_grade_1_step_01':  0.16069199,
        'occ_610_grade_1_step_02':  0.327245136,
        'occ_610_grade_1_step_03':  -0.055029597,
        'occ_610_grade_1_step_04':  -0.270412892,
        'occ_610_grade_1_step_05':  0.066148579,
        'occ_610_grade_1_step_06':  0.033183539,
        'occ_610_grade_1_step_07':  -0.008960523,
        'occ_610_grade_1_step_08':  0.030599111,
        'occ_610_grade_1_step_09':  0.013965135,
        'occ_610_grade_1_step_10':  -0.019147992,
        'occ_610_grade_1_step_11':  0.040442268,
        'occ_610_grade_1_step_12':  0.026958158,
        'occ_610_grade_1_step_13':  0.014333293,
        'occ_610_grade_1_step_14':  0.006429117,
        'occ_610_grade_1_step_X': 0.007228009,
        'occ_610_grade_2_step_01':  -0.068805083,
        'occ_610_grade_2_step_02':  -0.001872422,
        'occ_610_grade_2_step_03':  -0.000917935,
        'occ_610_grade_2_step_04':  0.009009467,
        'occ_610_grade_2_step_05':  0.010263215,
        'occ_610_grade_2_step_06':  0.007091415,
        'occ_610_grade_2_step_07':  0.016243098,
        'occ_610_grade_2_step_08':  0.001739601,
        'occ_610_grade_2_step_09':  0.002836206,
        'occ_610_grade_2_step_10':  0.004195177,
        'occ_610_grade_2_step_11':  0.020107113,
        'occ_610_grade_2_step_12':  0.01515976,
        'occ_610_grade_2_step_13':  0.00855838,
        'occ_610_grade_2_step_14':  0.013769416,
        'occ_610_grade_2_step_X': 0.012272495,
        'occ_610_grade_3_step_01':  0.063162121,
        'occ_610_grade_3_step_02':  0.125047024,
        'occ_610_grade_3_step_03':  -0.075091087,
        'occ_610_grade_3_step_04':  -0.005389509,
        'occ_610_grade_3_step_05':  0.017202812,
        'occ_610_grade_3_step_06':  -0.015933774,
        'occ_610_grade_3_step_07':  0.008311039,
        'occ_610_grade_3_step_08':  0.011946589,
        'occ_610_grade_3_step_09':  -0.000388405,
        'occ_610_grade_3_step_10':  0.024759291,
        'occ_610_grade_3_step_11':  0.010777243,
        'occ_610_grade_3_step_12':  0.008149526,
        'occ_610_grade_3_step_13':  0.016879103,
        'occ_610_grade_3_step_14':  0.033779355,
        'occ_610_grade_3_step_X': -0.014661236,
        'occ_610_grade_4_step_01':  -0.382676371,
        'occ_610_grade_4_step_02':  -0.010276433,
        'occ_610_grade_4_step_03':  0.090763121,
        'occ_610_grade_4_step_04':  0.015102834,
        'occ_610_grade_4_step_05':  -0.003022398,
        'occ_610_grade_4_step_06':  0.072287952,
        'occ_610_grade_4_step_07':  0.009649489,
        'occ_610_grade_4_step_08':  -0.030299681,
        'occ_610_grade_4_step_09':  0.035820118,
        'occ_610_grade_4_step_10':  -0.017487129,
        'occ_610_grade_4_step_11':  0.009588353,
        'occ_610_grade_4_step_12':  0.006841401,
        'occ_610_grade_4_step_13':  0.078769332,
        'occ_610_grade_4_step_14':  -0.739178349,
        'occ_610_grade_4_step_X': -0.362444169,
        'occ_620_grade_4_step_01':  -0.186746999,
        'occ_620_grade_4_step_02':  -0.39742758,
        'occ_620_grade_4_step_03':  -0.493501323,
        'occ_620_grade_4_step_04':  -0.00252515,
        'occ_620_grade_4_step_05':  0.028745118,
        'occ_620_grade_4_step_06':  5.492704211,
        'occ_620_grade_4_step_07':  -0.197810713,
        'occ_620_grade_4_step_08':  -0.151469316,
        'occ_620_grade_4_step_09':  0.491872665,
        'occ_620_grade_4_step_10':  0.061866107,
        'occ_620_grade_5_step_01':  -0.130147704,
        'occ_620_grade_5_step_02':  -0.205806146,
        'occ_620_grade_5_step_03':  -0.213719048,
        'occ_620_grade_5_step_04':  -0.072317308,
        'occ_620_grade_5_step_05':  0.009445883,
        'occ_620_grade_5_step_06':  -0.021220911,
        'occ_620_grade_5_step_07':  -0.021134496,
        'occ_620_grade_5_step_08':  0.078427722,
        'occ_620_grade_5_step_09':  -0.033408234,
        'occ_620_grade_5_step_10':  -0.010171167,
        'occ_620_grade_6_step_01':  0.196789152,
        'occ_620_grade_6_step_02':  0.114030632,
        'occ_620_grade_6_step_03':  0.081120042,
        'occ_620_grade_6_step_04':  0.042722203,
        'occ_620_grade_6_step_05':  -0.003966923,
        'occ_620_grade_6_step_06':  -0.012549128,
        'occ_620_grade_6_step_07':  -0.024766941,
        'occ_620_grade_6_step_08':  0.002740684,
        'occ_620_grade_6_step_09':  0.018304915,
        'occ_620_grade_6_step_10':  0.001932671,
        'occ_621_grade_4_step_01':  -0.770875182,
        'occ_621_grade_4_step_02':  -0.0205681,
        'occ_621_grade_4_step_03':  0.014962961,
        'occ_621_grade_4_step_04':  -0.023256369,
        'occ_621_grade_4_step_05':  0.00684475,
        'occ_621_grade_4_step_06':  -0.046779847,
        'occ_621_grade_4_step_07':  -0.102529075,
        'occ_621_grade_4_step_08':  -0.239236236,
        'occ_621_grade_4_step_09':  0.034913986,
        'occ_621_grade_4_step_10':  -0.026277795,
        'occ_621_grade_4_step_X': 0,
        'occ_621_grade_5_step_01':  0.12636413,
        'occ_621_grade_5_step_02':  0.065221137,
        'occ_621_grade_5_step_03':  -0.014127706,
        'occ_621_grade_5_step_04':  -0.040074037,
        'occ_621_grade_5_step_05':  -0.016185579,
        'occ_621_grade_5_step_06':  -0.031600406,
        'occ_621_grade_5_step_07':  0.0072962,
        'occ_621_grade_5_step_08':  0.000199706,
        'occ_621_grade_5_step_09':  0.027098259,
        'occ_621_grade_5_step_10':  0.002601889,
        'occ_621_grade_6_step_01':  0.01286909,
        'occ_621_grade_6_step_02':  0.176376925,
        'occ_621_grade_6_step_03':  -0.503496015,
        'occ_621_grade_6_step_04':  -0.088161649,
        'occ_621_grade_6_step_05':  0.03159517,
        'occ_621_grade_6_step_06':  -0.111314622,
        'occ_621_grade_6_step_07':  -0.183396224,
        'occ_621_grade_6_step_08':  0.050285241,
        'occ_621_grade_6_step_09':  -0.107132723
      },
      performance = {
        'High': 0.01517883,
        'Low': 1.056923409,
        'Moderate': 0.250715302
      },
      vamc = {
        'Albuquerque, NM': 0.153316793,
        'Alexandria, LA': 0.010146358,
        'All Others': -0.250467789,
        'Altoona, PA': -0.000617636,
        'Amarillo, TX': 0.35760967,
        'Anchorage, AK': -0.19279105,
        'Ann Arbor, MI': -0.07319852,
        'Asheville, NC': 0.150436417,
        'Atlanta {Decatur}, GA': -0.474644855,
        'Augusta, GA': 0.216096806,
        'Baltimore HCS, MD': -0.080612951,
        'Battle Creek, MI': 0.338056016,
        'Bay Pines, FL': 0.235053027,
        'Beckley, WV': 0.416693759,
        'Bedford, MA': -0.41597619,
        'Big Spring, TX': -0.221810669,
        'Biloxi, MS': -0.072734668,
        'Birmingham, AL': 0.233332077,
        'Black Hills HCS, SD': 0.121502619,
        'Boise, ID': 0.257921451,
        'Boston HCS, MA': -0.30327785,
        'Bronx, NY': -0.181782456,
        'Buffalo, NY': 0.16424224,
        'Butler, PA': 0.571439281,
        'Central Texas HCS, TX': -0.014523073,
        'Charleston, SC': 0.268272449,
        'Cheyenne, WY': 0.227667211,
        'Chicago HCS, IL': -0.550814232,
        'Chillicothe, OH': 0.327609426,
        'Cincinnati, OH': -0.017646906,
        'Clarksburg, WV': -0.048263698,
        'Cleveland, OH': -0.226145174,
        'Coatesville, PA': 0.49971003,
        'Columbia, SC': 0.06172717,
        'Columbus, OH': 0.010877342,
        'Connecticut HCS, CT': -0.252175571,
        'Dallas, TX': -0.20810563,
        'Danville, IL': 0.506373396,
        'Dayton, OH': -0.023644715,
        'Denver, CO': 0.374581594,
        'Detroit, MI': -0.086482035,
        'Dublin, GA': -0.178671699,
        'Durham, NC': -0.011877087,
        'El Paso, TX': 0.113585908,
        'Erie, PA': 0.005419426,
        'Fargo, ND': 0.057036102,
        'Fayetteville, AR': 0.633715565,
        'Fayetteville, NC': 0.234027713,
        'Fresno, CA': 0.168727059,
        'Gainesville, FL': 0.124845268,
        'Grand Junction, CO': 0.463968888,
        'Hampton, VA': -0.510225937,
        'Hines, IL': -0.267042083,
        'Honolulu, HI': -0.295345326,
        'Houston, TX': -0.238492706,
        'Hudson Valley HCS, NY': -0.285537088,
        'Huntington, WV': 0.522031661,
        'Indianapolis, IN': 0.092093879,
        'Iron Mountain, MI': 0.298772852,
        'Jackson, MS': -0.192520297,
        'Kansas City, MO': 0.019768146,
        'Las Vegas, NV': 0.249092442,
        'Lebanon, PA': 0.258538592,
        'Lexington, KY': 0.248717456,
        'Little Rock, AR': 0.1444355,
        'Loma Linda, CA': -0.187181658,
        'Long Beach, CA': -0.398703253,
        'Los Angeles HCS, CA': -0.492383022,
        'Louisville, KY': 0.132452482,
        'Madison, WI': 0.218183241,
        'Manchester, NH': -0.313012255,
        'Manila, PI': -3.819397656,
        'Martinsburg, WV': 0.071205101,
        'Memphis, TN': -0.600373026,
        'Miami, FL': -0.165403972,
        'Mid Tenn. HCS, TN': 0.095302386,
        'Milwaukee, WI': 0.047390897,
        'Minneapolis, MN': -0.117214703,
        'Montana HCS, MT': 0.048291988,
        'Montgomery, AL': 0.15765682,
        'Mountain Home, TN': 0.386733242,
        'Muskogee, OK': 0.297553445,
        'NY Harbor HCS, NY': -0.760683445,
        'Nebraska-W Iowa, NE': 0.290808196,
        'New Jersey HCS, NJ': -0.521079348,
        'New Orleans, LA': -0.561267216,
        'North Arizona HCS, AZ': 0.352137543,
        'North Calif HCS, CA': -0.495998208,
        'North Chicago, IL': -0.353640802,
        'North Indiana HCS, IN': 0.326285048,
        'Northampton, MA': 0.109799621,
        'Northport, NY': -0.465246187,
        'Oklahoma City, OK': -0.081317014,
        'Orlando, FL': -0.189080886,
        'Palo Alto, CA': -0.301969462,
        'Philadelphia, PA': -0.199552509,
        'Phoenix, AZ': 0.040504533,
        'Pittsburgh, PA': 0.108978271,
        'Portland, OR': -0.009840109,
        'Providence, RI': -0.016881717,
        'Puget Sound HCS, WA': -0.046930745,
        'Reno, NV': 0.147535553,
        'Richmond, VA': -0.037996472,
        'Roseburg, OR': 0.526746293,
        'Saginaw, MI': 0.437741301,
        'Salem, VA': -0.041090156,
        'Salisbury, NC': 0.309230598,
        'Salt Lake City, UT': -0.10807832,
        'San Diego, CA': -0.416280922,
        'San Francisco, CA': -0.381826568,
        'San Juan, PR': 0.452475874,
        'Sheridan, WY': 0.042737155,
        'Shreveport, LA': 0.362084814,
        'Sioux Falls, SD': 0.146495139,
        'South Arizona HCS, AZ': 0.765369778,
        'South Texas HCS, TX': 0.092572333,
        'Spokane, WA': 0.089828875,
        'St. Cloud, MN': 0.422861279,
        'St. Louis, MO': 0.134595836,
        'Tampa, FL': -0.016764972,
        'Texas Valley Coast HCS': -0.305018689,
        'Togus, ME': 0.253406824,
        'Tomah, WI': 0.493017894,
        'Tuscaloosa, AL': 0.338564784,
        'Walla Walla, WA': 0.536396751,
        'Washington, DC': -0.614736087,
        'West Palm Beach, FL': -0.303313471,
        'White City, OR': 0.72135792,
        'White River Jct., VT': -0.367067758,
        'Wilkes-Barre, PA': -0.140056096
      },
      d_grade_by_step =  'occ_' + d.occ + '_grade_' + d.grade + '_step_' + d.step,
      c;
        

  c = grade_by_step[d_grade_by_step];
  logit += c ? c : grade_by_step['ALL OTHER ' + d.occ];

  c = grade_by_step_X_tenure[d_grade_by_step];
  logit += c ? c * d.tenure : grade_by_step_X_tenure['ALL OTHER ' + d.occ] * d.tenure;

  logit += performance[d.performance] || 0;

  logit += vamc[d.vamc] || 0;

  logit += d.age * 0.520537481;

  logit += d.age * d.age * -0.001971271;

  logit += d.unemployment * 100 * -0.03562674;
  
  logit += d.tenure * 0.366612123;

  logit += d.tenure * d.age * -0.004264868;
  
  logit += d.tenure * d.tenure * -0.001450424;

  return 1/(1 + Math.exp(-logit));
}